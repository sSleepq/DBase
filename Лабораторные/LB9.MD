# Практическая работа №9: «Операции JOIN в SQL»

## Цель работы
Освоить различные типы операций `JOIN` для связывания таблиц в реляционных базах данных. Научиться формулировать запросы с учетом возможного отсутствия связей между записями.

---

## Теоретическая справка

При работе с несколькими связанными таблицами используются операции соединения (JOIN). Основные типы:

*   `INNER JOIN`: Возвращает записи, для которых есть соответствие в **обеих** таблицах.
*   `LEFT JOIN` (или `LEFT OUTER JOIN`): Возвращает **все** записи из левой таблицы и соответствующие им записи из правой. Если соответствия нет, поля из правой таблицы заполняются значениями `NULL`.
*   `RIGHT JOIN` (или `RIGHT OUTER JOIN`): Возвращает **все** записи из правой таблицы и соответствующие им записи из левой. Если соответствия нет, поля из левой таблицы заполняются значениями `NULL`.
*   `FULL JOIN` (или `FULL OUTER JOIN`): Возвращает записи при наличии совпадения в одной из таблиц. Не поддерживается в MySQL, но эмулируется.

---

## Постановка задачи

Вам предоставлена логическая структура двух таблиц: `authors` (авторы) и `posts` (статьи). Таблица `posts` ссылается на таблицу `authors` через внешний ключ `author_id`.

**Задача:** Используя предоставленные данные, вам необходимо:
1.  Самостоятельно создать в своей СУБД (например, MySQL, PostgreSQL) эти две таблицы.
2.  Заполнить их тестовыми данными.
3.  Составить и выполнить SQL-запросы для решения четырёх практических задач.

---

## Исходные данные

### 1. Схема таблиц

**Таблица `authors` (Авторы)**
| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `id` | INT | Уникальный идентификатор автора (первичный ключ) |
| `first_name` | VARCHAR | Имя автора |
| `last_name` | VARCHAR | Фамилия автора |
| `date_of_birth` | DATE | Дата рождения |

**Таблица `posts` (Статьи)**
| Поле | Тип данных | Описание |
| :--- | :--- | :--- |
| `id` | INT | Уникальный идентификатор статьи (первичный ключ) |
| `title` | VARCHAR | Заголовок статьи |
| `body` | TEXT | Текст статьи |
| `author_id` | INT | Идентификатор автора, написавшего статью (внешний ключ) |

### 2. Данные для заполнения

**Для таблицы `authors`:**
| id | first_name | last_name | date_of_birth |
| :--- | :--- | :--- | :--- |
| 1 | John | Smith | 1987-12-12 |
| 2 | Alex | Cooper | 1999-02-20 |
| 3 | Agata | Leyla | 1970-01-30 |
| 4 | Ivan | Ivanov | 1994-05-31 |
| 5 | Peter | Petrov | 1991-08-24 |

**Для таблицы `posts`:**
| id | title | body | author_id |
| :--- | :--- | :--- | :--- |
| 1 | Post-1 | Lorem ipsum dolor sit amet, consectetur adipiscing elit. | 12 |
| 2 | Post-2 | Duis aute irure dolor in reprehenderit in voluptate. | 24 |
| 3 | Post-3 | Sed ut perspiciatis, unde omnis iste natus error. | 2 |
| 4 | Post-4 | Ut enim ad minima veniam, quis nostrum. | 1 |
| 5 | Post-5 | Quis autem vel eum iure reprehenderit. | 34 |
| 6 | Post-6 | Et harum quidem rerum facilis est et expedita. | 31 |
| 7 | Post-7 | Excepteur sint occaecat cupidatat. | 22 |
| 8 | Post-8 | Ullam corporis suscipit laboriosam, nisi ut aliquid. | 11 |

**Внимание!** Обратите особое внимание на значения в столбце `author_id` таблицы `posts`. Не все они соответствуют существующим `id` в таблице `authors`.

---

## Ход работы

### Часть 1. Подготовка окружения

1.  Подключитесь к своей СУБД.
2.  Создайте новую базу данных для практической работы (например, `practice_join_db`).
3.  **Используя только схему и данные выше**, напишите SQL-скрипты для:
    *   Создания таблицы `authors`.
    *   Создания таблицы `posts`.
    *   Заполнения обеих таблиц данными.
4.  Выполните созданные скрипты. Убедитесь, что таблицы созданы и содержат данные.

### Часть 2. Выполнение запросов

Составьте и выполните SQL-запросы, решающие поставленные задачи. Результат выполнения каждого запроса (первые несколько строк) занесите в таблицу «Результаты».

#### Задача 1
Получите весь список постов и их авторов, даже если у поста нет автора.  
*(В результате должны быть все 8 постов. Для постов, чей `author_id` не найден в `authors`, информация об авторе должна быть `NULL`)*.

#### Задача 2
Получите весь список авторов и их постов, даже если у автора нет ни одного поста.  
*(В результате должны быть все 5 авторов. Для авторов, чей `id` не найден в `posts.author_id`, информация о посте должна быть `NULL`)*.

#### Задача 3
Получите имена (`first_name`, `last_name`) и год рождения авторов, а также название поста (`title`), который он написал. Учтите, что автор может не написать ни одного поста.  
*(Используйте функцию для извлечения года из даты, например, `YEAR()` или `EXTRACT()`)*.

#### Задача 4
Получите имена авторов и названия их постов. Причём **только для тех авторов, у которых нет ни одного поста**.  
*(Это должен быть поднабор результата из Задачи 2 или 3)*.

## Контрольные вопросы

1.  Какой тип `JOIN` вы использовали в Задаче 1? Объясните, почему он подходит для условия «даже если у поста нет автора».
2.  В чем принципиальная разница между `LEFT JOIN` и `RIGHT JOIN`? Можно ли результат Задачи 2 получить, используя `LEFT JOIN`? Если да, приведите альтернативный запрос.
3.  Почему в результатах Задачи 4 оказались авторы Agata, Ivan и Peter, но не оказалось John и Alex?
4.  Что означает значение `NULL` в столбцах, пришедших из правой таблицы в результате `LEFT JOIN`?
5.  Предложите, как можно было бы изменить структуру базы данных или процесс добавления данных, чтобы избежать появления постов с несуществующими `author_id`.

